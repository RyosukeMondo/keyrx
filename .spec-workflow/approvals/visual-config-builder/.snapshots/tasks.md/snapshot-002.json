{
  "id": "snapshot_1767426115928_j0ychgppm",
  "approvalId": "approval_1767022113941_lnj7ppgux",
  "approvalTitle": "Visual Configuration Builder - Tasks",
  "version": 2,
  "timestamp": "2026-01-03T07:41:55.928Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Tasks Document\n\n## Phase 1: Drag-and-Drop Foundation\n\n- [x] 1. Install drag-and-drop dependencies\n  - Add @dnd-kit/core@^6.1.0, @dnd-kit/sortable@^8.0.0\n  - _Prompt: Role: Frontend Build Engineer | Task: Add dnd-kit dependencies | Success: ✅ Installed_\n\n- [x] 2. Create ConfigState type definitions in keyrx_ui/src/types/configBuilder.ts\n  - Define ConfigState, Layer, Mapping, Modifier types\n  - _Prompt: Role: TypeScript Types Architect | Task: Define config builder state types | Restrictions: File ≤200 lines, strict mode | Success: ✅ Types defined_\n\n- [x] 3. Create Zustand config builder store in keyrx_ui/src/store/configBuilderStore.ts\n  - State: ConfigState with layers, modifiers, locks\n  - Actions: addLayer, removeLayer, addMapping, removeMapping\n  - _Prompt: Role: React State Expert | Task: Create Zustand store for visual builder | Restrictions: File ≤300 lines | Success: ✅ Store works_\n\n## Phase 2: Visual Components\n\n- [x] 4. Create VirtualKeyboard component in keyrx_ui/src/components/VirtualKeyboard.tsx\n  - Render keyboard layout with draggable keys\n  - Highlight mapped keys\n  - _Prompt: Role: React UI Developer | Task: Create virtual keyboard with drag-and-drop | Restrictions: File ≤400 lines, use @dnd-kit, QWERTY layout, highlight mappings | Success: ✅ Keyboard renders, ✅ Drag works_\n\n- [x] 5. Create LayerPanel component in keyrx_ui/src/components/LayerPanel.tsx\n  - List layers with drag-to-reorder\n  - Add/delete/rename buttons\n  - _Prompt: Role: React UI Developer | Task: Create layer management panel | Restrictions: File ≤250 lines, use @dnd-kit/sortable | Success: ✅ Layers manageable_\n\n- [x] 6. Create ModifierPanel component in keyrx_ui/src/components/ModifierPanel.tsx\n  - List modifiers/locks\n  - Drag key to assign\n  - _Prompt: Role: React UI Developer | Task: Create modifier management panel | Restrictions: File ≤200 lines | Success: ✅ Modifiers work_\n\n- [x] 7. Create CodePreview component in keyrx_ui/src/components/CodePreview.tsx\n  - Monaco editor (read-only) showing generated Rhai\n  - Copy button\n  - _Prompt: Role: React Developer | Task: Create code preview with Monaco | Restrictions: File ≤200 lines, syntax highlight Rhai | Success: ✅ Code displays_\n\n## Phase 3: Rhai Code Generation\n\n- [x] 8. Implement Rhai generator in keyrx_ui/src/utils/rhaiGenerator.ts\n  - Convert ConfigState to Rhai syntax\n  - Generate layer definitions, mappings, modifiers\n  - _Prompt: Role: Code Generation Expert | Task: Implement Rhai code generator | Restrictions: File ≤400 lines, generate valid Rhai syntax, format with indentation | Success: ✅ Valid Rhai generated_\n\n- [x] 9. Integrate validator with code preview\n  - Validate generated Rhai with WASM validator\n  - Show errors if invalid\n  - _Prompt: Role: Integration Developer | Task: Validate generated Rhai | Success: ✅ Validation works_\n\n## Phase 4: Import/Export\n\n- [x] 10. Implement Rhai parser in keyrx_ui/src/utils/rhaiParser.ts\n  - Parse Rhai to ConfigState (basic support)\n  - Warn on unsupported features\n  - _Prompt: Role: Parser Developer | Task: Parse Rhai to visual state | Restrictions: File ≤400 lines, handle basic mappings only | Success: ✅ Basic parsing works_\n\n- [x] 11. Add import/export buttons\n  - Import .rhai file → parse → visualize\n  - Export ConfigState → generate Rhai → download\n  - _Prompt: Role: File I/O Developer | Task: Add import/export functionality | Success: ✅ Import/export works_\n\n## Phase 5: Testing & Documentation\n\n- [x] 12. Write unit tests for Rhai generator\n  - Test simple mappings, layers, modifiers\n  - _Prompt: Role: Test Engineer | Task: Test Rhai generator | Success: ✅ All cases tested_\n\n- [x] 13. Write component tests\n  - Test drag-and-drop interactions\n  - _Prompt: Role: React Test Engineer | Task: Test visual builder UI | Success: ✅ Tests pass_\n\n- [x] 14. Write accessibility tests\n  - Test keyboard navigation for drag-and-drop\n  - _Prompt: Role: Accessibility QA | Task: Test WCAG compliance | Success: ✅ 0 axe violations_\n\n- [x] 15. Create documentation in docs/visual-config-builder.md\n  - How to use visual builder\n  - _Prompt: Role: Technical Writer | Task: Document visual builder | Success: ✅ Docs complete_\n\n- [x] 16. Log implementation artifacts\n  - Use spec-workflow log-implementation tool\n  - _Prompt: Role: Documentation Engineer | Task: Log artifacts | Success: ✅ Artifacts logged_\n",
  "fileStats": {
    "size": 4408,
    "lines": 85,
    "lastModified": "2025-12-29T23:49:33.483Z"
  },
  "comments": []
}