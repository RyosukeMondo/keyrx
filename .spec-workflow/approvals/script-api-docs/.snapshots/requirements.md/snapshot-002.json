{
  "id": "snapshot_1764768924533_cffko8qbn",
  "approvalId": "approval_1764768821770_bg43zepqt",
  "approvalTitle": "Script API Documentation Requirements",
  "version": 2,
  "timestamp": "2025-12-03T13:35:24.533Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Requirements Document\n\n## Introduction\n\nKeyRx uses Rhai scripting for advanced configurations, but there's zero auto-generated API documentation. Users must read Rust source code to understand available functions. This spec creates comprehensive, auto-generated Rhai API documentation with examples and type information.\n\n## Alignment with Product Vision\n\nThis feature supports KeyRx's product principles:\n- **User Experience**: Users can discover and use scripting features\n- **Documentation**: Self-documenting API\n- **Discoverability**: IDE-like experience for script writing\n\nPer product.md: \"Powerful scripting for advanced users\"\n\n## Requirements\n\n### Requirement 1: API Documentation Generation\n\n**User Story:** As a script author, I want auto-generated API docs, so that I know what functions are available.\n\n#### Acceptance Criteria\n\n1. WHEN Rhai functions are registered THEN documentation SHALL be extractable\n2. IF a function has a doc comment THEN it SHALL appear in generated docs\n3. WHEN docs are generated THEN all registered functions SHALL be included\n4. IF a function is deprecated THEN it SHALL be marked as such\n\n### Requirement 2: Type Information\n\n**User Story:** As a script author, I want type information, so that I know what parameters functions expect.\n\n#### Acceptance Criteria\n\n1. WHEN a function is documented THEN parameter types SHALL be shown\n2. IF a function returns a value THEN the return type SHALL be shown\n3. WHEN types are complex THEN they SHALL be explained\n4. IF a type has methods THEN they SHALL be documented\n\n### Requirement 3: Examples\n\n**User Story:** As a script author, I want examples, so that I can learn by example.\n\n#### Acceptance Criteria\n\n1. WHEN a function is documented THEN at least one example SHALL exist\n2. IF an example exists THEN it SHALL be runnable\n3. WHEN examples are tested THEN they SHALL pass\n4. IF an example fails THEN the build SHALL warn\n\n### Requirement 4: Searchable Documentation\n\n**User Story:** As a script author, I want searchable docs, so that I can find functions quickly.\n\n#### Acceptance Criteria\n\n1. WHEN docs are generated THEN they SHALL be in searchable format\n2. IF HTML docs exist THEN search functionality SHALL work\n3. WHEN searching THEN function names, parameters, and descriptions SHALL be indexed\n4. IF IDE integration exists THEN autocomplete SHALL use doc data\n\n## Non-Functional Requirements\n\n### Code Architecture and Modularity\n- **Single Source**: Docs generated from code, not manually written\n- **Modular Generation**: Each module's docs generated separately\n- **Testable Examples**: Examples are test cases\n\n### Documentation Quality\n- All public Rhai functions SHALL be documented\n- Examples SHALL cover common use cases\n- Type information SHALL be accurate\n- Docs SHALL be regenerated on changes\n\n### Integration\n- Docs SHALL be viewable in browser\n- Docs SHALL be exportable as markdown\n- Docs SHALL be usable by IDEs (JSON schema)\n",
  "fileStats": {
    "size": 2948,
    "lines": 79,
    "lastModified": "2025-12-03T13:33:14.893Z"
  },
  "comments": []
}