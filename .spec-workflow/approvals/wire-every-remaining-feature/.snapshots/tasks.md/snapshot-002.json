{
  "id": "snapshot_1764716953270_tzzm7d5br",
  "approvalId": "approval_1764716420634_y9au4mbik",
  "approvalTitle": "Wire Every Remaining Feature - Tasks Document",
  "version": 2,
  "timestamp": "2025-12-02T23:09:13.270Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Tasks Document\n\n## FFI Layer (Rust)\n\n- [ ] 1. Add device listing FFI export\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_list_devices()` returning JSON array of devices\n  - _Leverage: core/src/cli/commands/devices.rs_\n  - _Requirements: 1_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add `keyrx_list_devices` FFI export to core/src/ffi/mod.rs that returns JSON array [{name, vendorId, productId, path, hasProfile}] using existing devices.rs logic | Restrictions: ≤50 lines; return CString; handle errors as JSON | _Leverage: core/src/cli/commands/devices.rs | _Requirements: 1 | Success: FFI function callable, returns valid JSON device list._\n\n- [ ] 2. Add device selection FFI export\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_select_device(path)` to set active device\n  - _Leverage: existing device registry_\n  - _Requirements: 1_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add `keyrx_select_device` FFI export that takes device path as CString, sets it as active device in engine config, returns 0 on success | Restrictions: ≤30 lines; validate path exists | _Leverage: device registry | _Requirements: 1 | Success: Selected device persists and is used on engine start._\n\n- [ ] 3. Add script validation FFI export\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_check_script(path)` returning validation result JSON\n  - _Leverage: core/src/cli/commands/check.rs_\n  - _Requirements: 3_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add `keyrx_check_script` FFI export that validates Rhai script syntax, returns JSON {valid: bool, errors: [{line, column, message}]} | Restrictions: ≤60 lines; reuse check.rs parser | _Leverage: core/src/cli/commands/check.rs | _Requirements: 3 | Success: Validation errors include line/column for UI highlighting._\n\n- [ ] 4. Add test discovery and execution FFI exports\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_discover_tests(path)` and `keyrx_run_tests(path, filter)`\n  - _Leverage: core/src/cli/commands/test.rs_\n  - _Requirements: 5_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add `keyrx_discover_tests` returning JSON array of test_* functions [{name, file, line}], and `keyrx_run_tests` returning JSON results [{name, passed, error, durationMs}] | Restrictions: ≤100 lines; support filter pattern | _Leverage: core/src/cli/commands/test.rs | _Requirements: 5 | Success: Tests discoverable and runnable from FFI._\n\n- [ ] 5. Add simulation FFI export\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_simulate(keys_json, combo_mode)` returning simulation results\n  - _Leverage: core/src/cli/commands/simulate.rs_\n  - _Requirements: 6_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add `keyrx_simulate` FFI export taking JSON keys array [{code, holdMs}] and comboMode bool, returning JSON {mappings: [{input, output, decision}], activeLayers, pending} | Restrictions: ≤80 lines; reuse simulate.rs | _Leverage: core/src/cli/commands/simulate.rs | _Requirements: 6 | Success: Key sequences processed with full state output._\n\n- [ ] 6. Add session management FFI exports\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_list_sessions()`, `keyrx_analyze_session(path)`, `keyrx_replay_session(path, verify)`\n  - _Leverage: core/src/cli/commands/analyze.rs, replay.rs_\n  - _Requirements: 7, 10_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add session FFI exports: list_sessions returns [{path, name, created, eventCount, durationMs}], analyze_session returns full analysis JSON, replay_session streams events or returns verification result | Restrictions: ≤150 lines; scan sessions/ directory | _Leverage: analyze.rs, replay.rs | _Requirements: 7, 10 | Success: Sessions listable, analyzable, replayable from FFI._\n\n- [ ] 7. Add benchmark FFI export\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_run_benchmark(iterations)` returning results JSON\n  - _Leverage: core/src/cli/commands/bench.rs_\n  - _Requirements: 8_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add `keyrx_run_benchmark` FFI export taking iteration count, returning JSON {minNs, maxNs, meanNs, p99Ns, hasWarning} | Restrictions: ≤60 lines; reuse bench.rs | _Leverage: core/src/cli/commands/bench.rs | _Requirements: 8 | Success: Benchmark results match CLI output format._\n\n- [ ] 8. Add diagnostics FFI export\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_run_doctor()` returning diagnostics JSON\n  - _Leverage: core/src/cli/commands/doctor.rs_\n  - _Requirements: 9_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add `keyrx_run_doctor` FFI export returning JSON {checks: [{name, status, details, remediation}], passed, failed, warned} | Restrictions: ≤80 lines; platform-specific checks | _Leverage: core/src/cli/commands/doctor.rs | _Requirements: 9 | Success: All diagnostic checks run and report correctly._\n\n- [ ] 9. Add discovery FFI exports\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_start_discovery(device_id)` and progress callback\n  - _Leverage: core/src/cli/commands/discover.rs_\n  - _Requirements: 11_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add discovery FFI: `keyrx_start_discovery` taking device ID, `keyrx_on_discovery_progress` for callback registration. Return JSON progress updates and final result | Restrictions: ≤100 lines; handle cancellation | _Leverage: core/src/cli/commands/discover.rs | _Requirements: 11 | Success: Discovery wizard controllable from Flutter._\n\n- [ ] 10. Add recording control FFI exports\n  - Files: core/src/ffi/mod.rs (modify)\n  - Export `keyrx_start_recording(path)` and `keyrx_stop_recording()`\n  - _Leverage: existing session recording_\n  - _Requirements: 2_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Rust FFI engineer | Task: Add recording FFI: `keyrx_start_recording` taking output path, `keyrx_stop_recording` returning session path. Integrate with engine run loop | Restrictions: ≤50 lines; thread-safe state | _Leverage: session recording module | _Requirements: 2 | Success: Recording starts/stops cleanly, produces valid .krx files._\n\n## FFI Layer (Dart)\n\n- [ ] 11. Add FFI bindings for device management\n  - Files: ui/lib/ffi/bindings.dart (modify), ui/lib/ffi/bridge.dart (modify)\n  - Add Dart signatures and bridge methods for device functions\n  - _Leverage: existing binding patterns_\n  - _Requirements: 1_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter FFI engineer | Task: Add to bindings.dart: KeyrxListDevices, KeyrxSelectDevice typedefs. Add to bridge.dart: listDevices(), selectDevice(path) methods with JSON parsing | Restrictions: ≤60 lines; follow existing patterns | _Leverage: existing bindings.dart | _Requirements: 1 | Success: Dart can call device FFI functions._\n\n- [ ] 12. Add FFI bindings for validation, tests, simulation\n  - Files: ui/lib/ffi/bindings.dart (modify), ui/lib/ffi/bridge.dart (modify)\n  - Add Dart signatures and bridge methods\n  - _Leverage: existing binding patterns_\n  - _Requirements: 3, 5, 6_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter FFI engineer | Task: Add bindings for: checkScript, discoverTests, runTests, simulate. Add bridge methods with proper JSON parsing and error handling | Restrictions: ≤100 lines; return typed Dart objects | _Leverage: existing bindings.dart | _Requirements: 3, 5, 6 | Success: All new FFI functions callable from Dart._\n\n- [ ] 13. Add FFI bindings for sessions, benchmark, doctor, discovery\n  - Files: ui/lib/ffi/bindings.dart (modify), ui/lib/ffi/bridge.dart (modify)\n  - Add remaining Dart signatures and bridge methods\n  - _Leverage: existing binding patterns_\n  - _Requirements: 7, 8, 9, 10, 11_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter FFI engineer | Task: Add bindings for: listSessions, analyzeSession, replaySession, runBenchmark, runDoctor, startDiscovery, startRecording, stopRecording. Bridge methods with JSON parsing | Restrictions: ≤150 lines; consistent error handling | _Leverage: existing bindings.dart | _Requirements: 7, 8, 9, 10, 11 | Success: Full FFI coverage for all CLI commands._\n\n## Services Layer\n\n- [ ] 14. Create DeviceService\n  - Files: ui/lib/services/device_service.dart (new)\n  - Implement device listing, selection, profile checking\n  - _Leverage: ui/lib/services/engine_service.dart patterns_\n  - _Requirements: 1_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter service engineer | Task: Create DeviceService with: listDevices() → List<KeyboardDevice>, selectDevice(path), hasProfile(deviceId) → bool. Use KeyrxBridge | Restrictions: ≤80 lines; follow EngineService patterns | _Leverage: engine_service.dart | _Requirements: 1 | Success: Device operations abstracted behind clean service interface._\n\n- [ ] 15. Create TestService\n  - Files: ui/lib/services/test_service.dart (new)\n  - Implement test discovery and execution\n  - _Leverage: ui/lib/services/engine_service.dart patterns_\n  - _Requirements: 5_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter service engineer | Task: Create TestService with: discoverTests(scriptPath) → List<TestCase>, runTests(scriptPath, filter) → TestResults. Parse JSON from bridge | Restrictions: ≤100 lines; typed models | _Leverage: engine_service.dart | _Requirements: 5 | Success: Test execution abstracted with progress streaming._\n\n- [ ] 16. Create SimulationService\n  - Files: ui/lib/services/simulation_service.dart (new)\n  - Implement key sequence simulation\n  - _Leverage: ui/lib/services/engine_service.dart patterns_\n  - _Requirements: 6_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter service engineer | Task: Create SimulationService with: simulate(keys, comboMode) → SimulationResult. Models for KeyInput, KeyMapping, SimulationResult | Restrictions: ≤80 lines; clean API | _Leverage: engine_service.dart | _Requirements: 6 | Success: Simulation callable with typed inputs/outputs._\n\n- [ ] 17. Create SessionService\n  - Files: ui/lib/services/session_service.dart (new)\n  - Implement session listing, analysis, replay\n  - _Leverage: ui/lib/services/engine_service.dart patterns_\n  - _Requirements: 7, 10_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter service engineer | Task: Create SessionService with: listSessions() → List<SessionInfo>, analyze(path) → SessionAnalysis, replay(path, speed, verify) → Stream<ReplayEvent> | Restrictions: ≤120 lines; stream for replay | _Leverage: engine_service.dart | _Requirements: 7, 10 | Success: Full session management through service._\n\n- [ ] 18. Create BenchmarkService and DoctorService\n  - Files: ui/lib/services/benchmark_service.dart (new), ui/lib/services/doctor_service.dart (new)\n  - Implement benchmarking and diagnostics\n  - _Leverage: ui/lib/services/engine_service.dart patterns_\n  - _Requirements: 8, 9_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter service engineer | Task: Create BenchmarkService with runBenchmark(iterations) → BenchmarkResults. Create DoctorService with runDiagnostics() → DiagnosticReport | Restrictions: ≤100 lines total; typed models | _Leverage: engine_service.dart | _Requirements: 8, 9 | Success: Benchmark and diagnostics abstracted cleanly._\n\n## User Interface Pages\n\n- [ ] 19. Create DevicesPage\n  - Files: ui/lib/pages/devices_page.dart (new)\n  - Device list with selection and refresh\n  - _Leverage: ui/lib/pages/debugger_page.dart layout patterns_\n  - _Requirements: 1_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create DevicesPage showing device list with ListTile for each (name, path, profile badge). Tap to select, pull-to-refresh, empty state with troubleshooting | Restrictions: ≤150 lines; Material 3 design | _Leverage: debugger_page.dart | _Requirements: 1 | Success: Users can see and select their keyboard device._\n\n- [ ] 20. Create RunControlsPage\n  - Files: ui/lib/pages/run_controls_page.dart (new)\n  - Central engine control panel\n  - _Leverage: ui/lib/pages/training_screen.dart patterns_\n  - _Requirements: 2_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create RunControlsPage with large Start/Stop FAB, device dropdown, script selector, recording toggle, status indicators (running, device, script, recording) | Restrictions: ≤200 lines; prominent controls | _Leverage: training_screen.dart | _Requirements: 2 | Success: One-tap engine start with clear status._\n\n- [ ] 21. Add script validation to EditorPage\n  - Files: ui/lib/pages/editor_page.dart (modify)\n  - Add real-time validation and error display\n  - _Leverage: existing editor_page.dart_\n  - _Requirements: 3_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Modify EditorPage to call checkScript on script changes (debounced 500ms). Show error banner when invalid, highlight line on tap. Block Load if invalid | Restrictions: ≤80 lines added; non-intrusive UX | _Leverage: existing editor_page.dart | _Requirements: 3 | Success: Syntax errors visible before loading script._\n\n- [ ] 22. Update main navigation for User screens\n  - Files: ui/lib/main.dart (modify)\n  - Add Devices and Run Controls to NavigationRail\n  - _Leverage: existing main.dart navigation_\n  - _Requirements: 1, 2_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Add Devices (icon: keyboard) and Run Controls (icon: play_circle) to NavigationRail after Editor. Update selectedIndex handling | Restrictions: ≤30 lines changed; maintain existing order | _Leverage: main.dart | _Requirements: 1, 2 | Success: 4-tab user navigation working._\n\n## Developer Tools Navigation\n\n- [ ] 23. Create DeveloperDrawer widget\n  - Files: ui/lib/widgets/developer_drawer.dart (new)\n  - Navigation drawer for developer tools\n  - _Leverage: ui/lib/main.dart NavigationRail patterns_\n  - _Requirements: 4_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create DeveloperDrawer with NavigationDrawer containing destinations: Debugger, Console, Test Runner, Simulator, Analyzer, Benchmark, Doctor, Replay, Discovery. Include header and close button | Restrictions: ≤100 lines; consistent styling | _Leverage: main.dart navigation | _Requirements: 4 | Success: Drawer shows all 9 developer tools._\n\n- [ ] 24. Add developer mode to AppState\n  - Files: ui/lib/state/app_state.dart (modify)\n  - Add developer mode flag with persistence\n  - _Leverage: existing app_state.dart_\n  - _Requirements: 4_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter state engineer | Task: Add isDeveloperMode bool to AppState with SharedPreferences persistence. Add toggleDeveloperMode() method | Restrictions: ≤30 lines added; persist across restarts | _Leverage: app_state.dart | _Requirements: 4 | Success: Developer mode persists and controls drawer visibility._\n\n- [ ] 25. Integrate DeveloperDrawer into main app\n  - Files: ui/lib/main.dart (modify)\n  - Add developer tools button and drawer integration\n  - _Leverage: existing main.dart_\n  - _Requirements: 4_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Add developer tools IconButton to AppBar. When tapped, show DeveloperDrawer. Handle navigation to developer pages. Show developer page content when selected | Restrictions: ≤60 lines added; clean integration | _Leverage: main.dart | _Requirements: 4 | Success: Developer tools accessible from app bar button._\n\n## Developer Tool Pages\n\n- [ ] 26. Create TestRunnerPage\n  - Files: ui/lib/pages/developer/test_runner_page.dart (new)\n  - Test discovery, execution, and results display\n  - _Leverage: ui/lib/pages/debugger_page.dart patterns_\n  - _Requirements: 5_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create TestRunnerPage with: test list showing name/status, Run All button, filter TextField, individual test tap-to-run, expandable error details, watch mode toggle | Restrictions: ≤250 lines; real-time status updates | _Leverage: debugger_page.dart | _Requirements: 5 | Success: Full test runner UI with live results._\n\n- [ ] 27. Create SimulatorPage\n  - Files: ui/lib/pages/developer/simulator_page.dart (new)\n  - Key sequence simulation with virtual keyboard\n  - _Leverage: ui/lib/widgets/keyboard.dart_\n  - _Requirements: 6_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create SimulatorPage with: virtual keyboard for key selection, key sequence chips with hold duration editor, combo mode toggle, Simulate button, results showing input→output mappings, layer/pending state | Restrictions: ≤300 lines; interactive keyboard | _Leverage: keyboard.dart | _Requirements: 6 | Success: Users can build and test key sequences visually._\n\n- [ ] 28. Create AnalyzerPage\n  - Files: ui/lib/pages/developer/analyzer_page.dart (new)\n  - Session analysis with statistics and timeline\n  - _Leverage: ui/lib/pages/debugger_page.dart patterns_\n  - _Requirements: 7_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create AnalyzerPage with: session file picker, statistics cards (events, duration, latency), decision breakdown pie chart, timeline view with event details on tap | Restrictions: ≤250 lines; use fl_chart for visualization | _Leverage: debugger_page.dart, trade_off_chart.dart | _Requirements: 7 | Success: Sessions analyzable with visual timeline._\n\n- [ ] 29. Create BenchmarkPage\n  - Files: ui/lib/pages/developer/benchmark_page.dart (new)\n  - Latency benchmark configuration and results\n  - _Leverage: ui/lib/pages/trade_off_page.dart patterns_\n  - _Requirements: 8_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create BenchmarkPage with: iterations slider (1K-100K), Run Benchmark button with progress, results cards (min/max/mean/p99), warning banner if >1ms, optional history chart | Restrictions: ≤180 lines; clear results display | _Leverage: trade_off_page.dart | _Requirements: 8 | Success: Benchmarks runnable with clear latency reporting._\n\n- [ ] 30. Create DoctorPage\n  - Files: ui/lib/pages/developer/doctor_page.dart (new)\n  - System diagnostics with remediation\n  - _Leverage: ui/lib/pages/ patterns_\n  - _Requirements: 9_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create DoctorPage with: auto-run on open, check list with pass/fail/warn icons, expandable details, remediation steps for failures, Re-run button, summary counts | Restrictions: ≤180 lines; helpful remediation | _Leverage: existing page patterns | _Requirements: 9 | Success: Users can diagnose setup issues from UI._\n\n- [ ] 31. Create ReplayPage\n  - Files: ui/lib/pages/developer/replay_page.dart (new)\n  - Session replay with playback controls\n  - _Leverage: ui/lib/pages/debugger_page.dart patterns_\n  - _Requirements: 10_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create ReplayPage with: session list, metadata display, Play/Pause/Stop controls, speed slider (0x/1x/2x), verify mode toggle, event visualization during playback, mismatch highlighting | Restrictions: ≤250 lines; real-time playback | _Leverage: debugger_page.dart | _Requirements: 10 | Success: Sessions replayable with verification._\n\n- [ ] 32. Create DiscoveryPage\n  - Files: ui/lib/pages/developer/discovery_page.dart (new)\n  - Device profile discovery wizard\n  - _Leverage: ui/lib/pages/ patterns_\n  - _Requirements: 11_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter UI engineer | Task: Create DiscoveryPage with: Start Discovery button, step-by-step prompts, key press feedback, progress indicator, confirmation screen showing detected layout, Save/Cancel buttons | Restrictions: ≤250 lines; wizard flow | _Leverage: existing page patterns | _Requirements: 11 | Success: Device profiles creatable through guided UI._\n\n## Integration & Testing\n\n- [ ] 33. Create developer pages directory structure\n  - Files: ui/lib/pages/developer/ (new directory)\n  - Ensure proper directory structure for developer pages\n  - _Leverage: existing ui/lib/pages/ structure_\n  - _Requirements: 4_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter engineer | Task: Create ui/lib/pages/developer/ directory. Add barrel file (developer.dart) exporting all developer pages | Restrictions: ≤20 lines for barrel file | _Leverage: existing structure | _Requirements: 4 | Success: Developer pages properly organized._\n\n- [ ] 34. Add data models for new features\n  - Files: ui/lib/models/ (new directory with model files)\n  - Create typed models for all new data structures\n  - _Leverage: existing model patterns_\n  - _Requirements: All_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter data engineer | Task: Create models: KeyboardDevice, TestCase, TestResult, SimulationResult, SessionInfo, SessionAnalysis, BenchmarkResult, DiagnosticCheck. Use freezed or manual immutable classes | Restrictions: ≤200 lines total; JSON serialization | _Leverage: existing patterns | _Requirements: All | Success: All data types properly modeled._\n\n- [ ] 35. Write widget tests for new pages\n  - Files: ui/test/pages/ (new test files)\n  - Test key UI interactions for each new page\n  - _Leverage: existing ui/test/ patterns_\n  - _Requirements: All_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter test engineer | Task: Create widget tests for: DevicesPage (list, select), RunControlsPage (start/stop), TestRunnerPage (run, filter), SimulatorPage (add keys, simulate). Mock services | Restrictions: ≤300 lines total; mock FFI | _Leverage: existing tests | _Requirements: All | Success: Core UI flows have test coverage._\n\n- [ ] 36. Write integration tests for FFI round-trip\n  - Files: ui/integration_test/ffi_test.dart (new)\n  - Test Dart→Rust→Dart data flow\n  - _Leverage: Flutter integration test patterns_\n  - _Requirements: All_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter integration test engineer | Task: Create integration tests verifying FFI round-trip for: listDevices, checkScript, simulate, runBenchmark. Test on real library | Restrictions: ≤150 lines; skip if library unavailable | _Leverage: Flutter integration_test | _Requirements: All | Success: FFI calls work end-to-end._\n\n- [ ] 37. Update README with new UI features\n  - Files: README.md (modify)\n  - Document new User and Developer tool screens\n  - _Leverage: existing README structure_\n  - _Requirements: All_\n  - _Prompt: Implement the task for spec wire-every-remaining-feature, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Technical writer | Task: Add \"## Flutter UI\" section to README explaining: User interface (4 screens), Developer Tools (how to access, 8 tools), feature overview | Restrictions: ≤60 lines added; include screenshots placeholder | _Leverage: README.md | _Requirements: All | Success: New contributors understand UI capabilities._\n",
  "fileStats": {
    "size": 26949,
    "lines": 275,
    "lastModified": "2025-12-02T23:00:15.173Z"
  },
  "comments": []
}