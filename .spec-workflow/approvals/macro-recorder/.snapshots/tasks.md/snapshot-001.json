{
  "id": "snapshot_1767022118055_ib8tkmao1",
  "approvalId": "approval_1767022118042_3x4k2n3lq",
  "approvalTitle": "Macro Recorder - Tasks",
  "version": 1,
  "timestamp": "2025-12-29T15:28:38.055Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Tasks Document\n\n## Phase 1: Backend Macro Recording (Rust)\n\n- [ ] 1. Create macro recorder in keyrx_daemon/src/macro_recorder.rs\n  - Recording mode: capture all key events with timestamps\n  - Store events in buffer\n  - _Prompt: Role: Rust Developer | Task: Create macro recorder with event capture | Restrictions: File ≤400 lines, capture press/release with μs timestamps, recording mode toggleable | Success: ✅ Events captured_\n\n- [ ] 2. Add macro API endpoints in keyrx_daemon/src/web/api.rs\n  - POST /api/macros/start-recording, POST /api/macros/stop-recording, GET /api/macros/recorded-events\n  - _Prompt: Role: Rust API Developer | Task: Add macro REST endpoints | Success: ✅ Recording controlled via API_\n\n## Phase 2: React UI Components\n\n- [ ] 3. Create MacroRecorderPage component in keyrx_ui/src/pages/MacroRecorderPage.tsx\n  - Record/stop buttons\n  - Display captured events\n  - Generate Rhai code\n  - _Prompt: Role: React Developer | Task: Create macro recorder page | Restrictions: File ≤400 lines, show recording indicator, list events, preview Rhai code | Success: ✅ Recording UI works_\n\n- [ ] 4. Create EventTimeline component in keyrx_ui/src/components/EventTimeline.tsx\n  - Visual timeline for event editing\n  - Drag events to adjust timing\n  - _Prompt: Role: React UI Developer | Task: Create event timeline editor | Restrictions: File ≤300 lines, draggable events, timestamp editing | Success: ✅ Timeline editable_\n\n## Phase 3: Macro Code Generation\n\n- [ ] 5. Implement Rhai macro generator in keyrx_ui/src/utils/macroGenerator.ts\n  - Convert MacroEvent[] to Rhai macro syntax\n  - _Prompt: Role: Code Generation Expert | Task: Generate Rhai macro code | Restrictions: File ≤300 lines, generate valid Rhai syntax | Success: ✅ Valid Rhai generated_\n\n- [ ] 6. Add macro testing with simulator\n  - Test macro playback in WASM simulator\n  - _Prompt: Role: Integration Developer | Task: Test macro via simulator | Success: ✅ Testing works_\n\n## Phase 4: Macro Templates\n\n- [ ] 7. Implement text snippet template\n  - Convert text string to key sequence\n  - _Prompt: Role: Template Developer | Task: Create text snippet template | Success: ✅ Text converts to keys_\n\n- [ ] 8. Create macro templates library\n  - Pre-built templates (email signatures, common snippets)\n  - _Prompt: Role: UX Developer | Task: Create macro template library | Success: ✅ Templates available_\n\n## Phase 5: Testing & Documentation\n\n- [ ] 9. Write unit tests for macro recorder (Rust)\n  - Test event capture, timestamp accuracy\n  - _Prompt: Role: Rust Test Engineer | Task: Test macro recorder | Success: ✅ Tests pass_\n\n- [ ] 10. Write component tests for MacroRecorderPage\n  - Test recording flow, editing\n  - _Prompt: Role: React Test Engineer | Task: Test macro UI | Success: ✅ Tests pass_\n\n- [ ] 11. Write E2E test for macro workflow\n  - Record → edit → test → save\n  - _Prompt: Role: QA Automation Engineer | Task: Test full macro workflow | Success: ✅ E2E test passes_\n\n- [ ] 12. Create documentation in docs/macro-recorder.md\n  - How to record and use macros\n  - _Prompt: Role: Technical Writer | Task: Document macro recorder | Success: ✅ Docs complete_\n\n- [ ] 13. Log implementation artifacts\n  - Use spec-workflow log-implementation tool\n  - _Prompt: Role: Documentation Engineer | Task: Log artifacts | Success: ✅ Artifacts logged_\n",
  "fileStats": {
    "size": 3371,
    "lines": 68,
    "lastModified": "2025-12-29T15:25:57.710Z"
  },
  "comments": []
}