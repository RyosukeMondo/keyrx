{"version":3,"file":"Modal-KUDrpHjH.js","sources":["../../src/components/Modal.tsx"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  scaleVariants,\n  backdropVariants,\n  transitions,\n  createAnimationProps,\n} from '@/utils/animations';\n\nexport interface ModalProps {\n  open: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const Modal = React.memo<ModalProps>(({ open, onClose, title, children, className = '' }) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const previousActiveElement = useRef<HTMLElement | null>(null);\n\n  // Store the element that had focus when modal opened\n  useEffect(() => {\n    if (open) {\n      previousActiveElement.current = document.activeElement as HTMLElement;\n    }\n  }, [open]);\n\n  // Handle Escape key\n  const handleEscape = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Escape' && open) {\n        onClose();\n      }\n    },\n    [open, onClose]\n  );\n\n  // Add/remove escape key listener\n  useEffect(() => {\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [handleEscape]);\n\n  // Focus trap implementation\n  useEffect(() => {\n    if (!open || !modalRef.current) return;\n\n    const modal = modalRef.current;\n    const content = modal.querySelector('[data-modal-content]');\n    const focusableElements = modal.querySelectorAll<HTMLElement>(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n    const firstFocusable = focusableElements[0];\n    const lastFocusable = focusableElements[focusableElements.length - 1];\n\n    // Focus first element in content if content has focusable elements\n    if (content) {\n      const contentFocusable = content.querySelector<HTMLElement>(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n      if (contentFocusable) {\n        contentFocusable.focus();\n      } else {\n        firstFocusable?.focus();\n      }\n    } else {\n      firstFocusable?.focus();\n    }\n\n    const handleTab = (event: KeyboardEvent) => {\n      if (event.key !== 'Tab') return;\n\n      if (event.shiftKey) {\n        // Shift + Tab\n        if (document.activeElement === firstFocusable) {\n          event.preventDefault();\n          lastFocusable?.focus();\n        }\n      } else {\n        // Tab\n        if (document.activeElement === lastFocusable) {\n          event.preventDefault();\n          firstFocusable?.focus();\n        }\n      }\n    };\n\n    modal.addEventListener('keydown', handleTab as EventListener);\n    return () => modal.removeEventListener('keydown', handleTab as EventListener);\n  }, [open]);\n\n  // Return focus when modal closes\n  useEffect(() => {\n    if (!open && previousActiveElement.current) {\n      previousActiveElement.current.focus();\n      previousActiveElement.current = null;\n    }\n  }, [open]);\n\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    if (open) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [open]);\n\n  const handleBackdropClick = (event: React.MouseEvent) => {\n    if (event.target === event.currentTarget) {\n      onClose();\n    }\n  };\n\n  const backdropProps = createAnimationProps(backdropVariants, transitions.quick);\n  const modalProps = createAnimationProps(scaleVariants, transitions.normal);\n\n  const modalContent = (\n    <AnimatePresence mode=\"wait\">\n      {open && (\n        <motion.div\n          {...backdropProps}\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          onClick={handleBackdropClick}\n          role=\"presentation\"\n        >\n          {/* Backdrop */}\n          <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" aria-hidden=\"true\" />\n\n          {/* Modal */}\n          <motion.div\n            {...modalProps}\n            ref={modalRef}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"modal-title\"\n            className={`relative bg-slate-800 rounded-lg shadow-2xl border border-slate-700 w-full max-w-lg max-h-[90vh] overflow-hidden ${className}`}\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between px-6 py-4 border-b border-slate-700\">\n              <h2 id=\"modal-title\" className=\"text-lg font-semibold text-slate-100\">\n                {title}\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"text-slate-400 hover:text-slate-100 transition-colors p-1 rounded hover:bg-slate-700\"\n                aria-label=\"Close modal\"\n              >\n                <svg\n                  className=\"w-5 h-5\"\n                  fill=\"none\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                >\n                  <path d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"px-6 py-4 overflow-y-auto max-h-[calc(90vh-8rem)]\" data-modal-content>\n              {children}\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n\n  return createPortal(modalContent, document.body);\n});\n\nModal.displayName = 'Modal';\n"],"names":["Modal","React","memo","open","onClose","title","children","className","modalRef","useRef","previousActiveElement","useEffect","current","document","activeElement","handleEscape","useCallback","event","key","addEventListener","removeEventListener","modal","content","querySelector","focusableElements","querySelectorAll","firstFocusable","lastFocusable","length","contentFocusable","focus","handleTab","shiftKey","preventDefault","body","style","overflow","backdropProps","createAnimationProps","backdropVariants","transitions","quick","modalProps","scaleVariants","normal","modalContent","jsx","AnimatePresence","mode","jsxs","motion","div","onClick","target","currentTarget","role","ref","id","fill","strokeLinecap","strokeLinejoin","strokeWidth","viewBox","stroke","d","createPortal","displayName"],"mappings":"yIAkBO,MAAMA,EAAQC,EAAMC,KAAiB,EAAGC,OAAMC,UAASC,QAAOC,WAAUC,YAAY,OACzF,MAAMC,EAAWC,EAAAA,OAAuB,MAClCC,EAAwBD,EAAAA,OAA2B,MAGzDE,EAAAA,UAAU,KACJR,IACFO,EAAsBE,QAAUC,SAASC,gBAE1C,CAACX,IAGJ,MAAMY,EAAeC,EAAAA,YAClBC,IACmB,WAAdA,EAAMC,KAAoBf,GAC5BC,KAGJ,CAACD,EAAMC,IAITO,EAAAA,UAAU,KACRE,SAASM,iBAAiB,UAAWJ,GAC9B,IAAMF,SAASO,oBAAoB,UAAWL,IACpD,CAACA,IAGJJ,EAAAA,UAAU,KACR,IAAKR,IAASK,EAASI,QAAS,OAEhC,MAAMS,EAAQb,EAASI,QACjBU,EAAUD,EAAME,cAAc,wBAC9BC,EAAoBH,EAAMI,iBAC9B,4EAEIC,EAAiBF,EAAkB,GACnCG,EAAgBH,EAAkBA,EAAkBI,OAAS,GAGnE,GAAIN,EAAS,CACX,MAAMO,EAAmBP,EAAQC,cAC/B,4EAEEM,EACFA,EAAiBC,QAEjBJ,GAAgBI,OAEpB,MACEJ,GAAgBI,QAGlB,MAAMC,EAAad,IACC,QAAdA,EAAMC,MAEND,EAAMe,SAEJnB,SAASC,gBAAkBY,IAC7BT,EAAMgB,iBACNN,GAAeG,SAIbjB,SAASC,gBAAkBa,IAC7BV,EAAMgB,iBACNP,GAAgBI,WAMtB,OADAT,EAAMF,iBAAiB,UAAWY,GAC3B,IAAMV,EAAMD,oBAAoB,UAAWW,IACjD,CAAC5B,IAGJQ,EAAAA,UAAU,MACHR,GAAQO,EAAsBE,UACjCF,EAAsBE,QAAQkB,QAC9BpB,EAAsBE,QAAU,OAEjC,CAACT,IAGJQ,EAAAA,UAAU,KAENE,SAASqB,KAAKC,MAAMC,SADlBjC,EAC6B,SAEA,GAE1B,KACLU,SAASqB,KAAKC,MAAMC,SAAW,KAEhC,CAACjC,IAEJ,MAMMkC,EAAgBC,EAAqBC,EAAkBC,EAAYC,OACnEC,EAAaJ,EAAqBK,EAAeH,EAAYI,QAE7DC,EACJC,EAAAA,IAACC,EAAA,CAAgBC,KAAK,OACnB1C,SAAAH,GACC8C,EAAAA,KAACC,EAAOC,IAAP,IACKd,EACJ9B,UAAU,0DACV6C,QAfqBnC,IACvBA,EAAMoC,SAAWpC,EAAMqC,eACzBlD,KAcImD,KAAK,eAGLjD,SAAA,CAAAwC,EAAAA,IAAC,MAAA,CAAIvC,UAAU,gDAAgD,cAAY,SAG3E0C,EAAAA,KAACC,EAAOC,IAAP,IACKT,EACJc,IAAKhD,EACL+C,KAAK,SACL,aAAW,OACX,kBAAgB,cAChBhD,UAAW,oHAAoHA,IAG/HD,SAAA,CAAA2C,EAAAA,KAAC,MAAA,CAAI1C,UAAU,wEACbD,SAAA,CAAAwC,MAAC,KAAA,CAAGW,GAAG,cAAclD,UAAU,uCAC5BD,SAAAD,IAEHyC,EAAAA,IAAC,SAAA,CACCM,QAAShD,EACTG,UAAU,uFACV,aAAW,cAEXD,SAAAwC,EAAAA,IAAC,MAAA,CACCvC,UAAU,UACVmD,KAAK,OACLC,cAAc,QACdC,eAAe,QACfC,YAAY,IACZC,QAAQ,YACRC,OAAO,eAEPzD,SAAAwC,EAAAA,IAAC,OAAA,CAAKkB,EAAE,sCAMb,MAAA,CAAIzD,UAAU,oDAAoD,sBAAkB,EAClFD,qBAQb,OAAO2D,eAAapB,EAAchC,SAASqB,QAG7ClC,EAAMkE,YAAc"}