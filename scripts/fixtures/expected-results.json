{
  "version": "1.0",
  "apiVersion": "0.1.0",
  "description": "Expected API responses for automated E2E testing",
  "endpoints": {
    "/api/health": {
      "scenarios": {
        "healthy": {
          "method": "GET",
          "status": 200,
          "headers": {
            "content-type": "application/json"
          },
          "body": {
            "status": "ok",
            "version": "0.1.0"
          },
          "ignoreFields": ["version"]
        }
      }
    },
    "/api/version": {
      "scenarios": {
        "default": {
          "method": "GET",
          "status": 200,
          "body": {
            "version": "0.1.0",
            "build_time": "2024-01-01T00:00:00Z",
            "platform": "linux"
          },
          "ignoreFields": ["version", "build_time", "git_hash", "platform"]
        }
      }
    },
    "/api/status": {
      "scenarios": {
        "running": {
          "method": "GET",
          "status": 200,
          "body": {
            "status": "running",
            "version": "0.1.0",
            "daemon_running": true,
            "uptime_secs": 0,
            "active_profile": null,
            "device_count": 0
          },
          "ignoreFields": ["version", "uptime_secs", "active_profile", "device_count"]
        },
        "with_active_profile": {
          "method": "GET",
          "status": 200,
          "body": {
            "status": "running",
            "daemon_running": true,
            "active_profile": "default"
          },
          "ignoreFields": ["version", "uptime_secs", "device_count"]
        }
      }
    },
    "/api/profiles": {
      "scenarios": {
        "empty": {
          "method": "GET",
          "status": 200,
          "body": {
            "profiles": []
          }
        },
        "with_default": {
          "method": "GET",
          "status": 200,
          "body": {
            "profiles": [
              {
                "name": "default",
                "rhaiPath": "/path/to/default.rhai",
                "krxPath": "/path/to/default.krx",
                "modifiedAt": "2024-01-01T00:00:00Z",
                "createdAt": "2024-01-01T00:00:00Z",
                "layerCount": 1,
                "deviceCount": 0,
                "keyCount": 0,
                "isActive": false
              }
            ]
          },
          "ignoreFields": ["profiles[].rhaiPath", "profiles[].krxPath", "profiles[].modifiedAt", "profiles[].createdAt"]
        }
      }
    },
    "/api/profiles (POST)": {
      "scenarios": {
        "create_success": {
          "method": "POST",
          "status": 201,
          "requestBody": {
            "name": "test-profile",
            "template": "empty"
          },
          "body": {
            "message": "Profile created successfully",
            "profile": {
              "name": "test-profile"
            }
          },
          "ignoreFields": ["profile"]
        },
        "create_duplicate": {
          "method": "POST",
          "status": 409,
          "requestBody": {
            "name": "default"
          },
          "body": {
            "error": "Profile already exists",
            "code": "PROFILE_EXISTS"
          },
          "ignoreFields": ["message"]
        }
      }
    },
    "/api/profiles/active": {
      "scenarios": {
        "no_active": {
          "method": "GET",
          "status": 200,
          "body": {
            "active_profile": null
          }
        },
        "has_active": {
          "method": "GET",
          "status": 200,
          "body": {
            "active_profile": "default"
          }
        }
      }
    },
    "/api/profiles/:name/activate": {
      "scenarios": {
        "activate_success": {
          "method": "POST",
          "status": 200,
          "pathParams": {
            "name": "default"
          },
          "body": {
            "message": "Profile activated successfully",
            "profile": "default"
          },
          "ignoreFields": ["message"]
        },
        "activate_not_found": {
          "method": "POST",
          "status": 404,
          "pathParams": {
            "name": "nonexistent"
          },
          "body": {
            "error": "Profile not found",
            "code": "PROFILE_NOT_FOUND"
          },
          "ignoreFields": ["message"]
        }
      }
    },
    "/api/profiles/:name (DELETE)": {
      "scenarios": {
        "delete_success": {
          "method": "DELETE",
          "status": 200,
          "pathParams": {
            "name": "test-profile"
          },
          "body": {
            "message": "Profile deleted successfully"
          },
          "ignoreFields": ["message"]
        },
        "delete_not_found": {
          "method": "DELETE",
          "status": 404,
          "pathParams": {
            "name": "nonexistent"
          },
          "body": {
            "error": "Profile not found",
            "code": "PROFILE_NOT_FOUND"
          },
          "ignoreFields": ["message"]
        }
      }
    },
    "/api/devices": {
      "scenarios": {
        "empty": {
          "method": "GET",
          "status": 200,
          "body": {
            "devices": []
          }
        },
        "with_devices": {
          "method": "GET",
          "status": 200,
          "body": {
            "devices": [
              {
                "id": "device-1",
                "name": "Test Keyboard",
                "path": "/dev/input/event0",
                "serial": null,
                "active": true,
                "scope": null,
                "layout": null
              }
            ]
          },
          "ignoreFields": ["devices[].id", "devices[].name", "devices[].path", "devices[].serial"]
        }
      }
    },
    "/api/devices/:id (PATCH)": {
      "scenarios": {
        "update_success": {
          "method": "PATCH",
          "status": 200,
          "pathParams": {
            "id": "device-1"
          },
          "requestBody": {
            "active": false
          },
          "body": {
            "message": "Device updated successfully",
            "device": {
              "id": "device-1",
              "active": false
            }
          },
          "ignoreFields": ["device"]
        },
        "update_not_found": {
          "method": "PATCH",
          "status": 404,
          "pathParams": {
            "id": "nonexistent"
          },
          "body": {
            "error": "Device not found",
            "code": "DEVICE_NOT_FOUND"
          }
        }
      }
    },
    "/api/layouts": {
      "scenarios": {
        "list": {
          "method": "GET",
          "status": 200,
          "body": {
            "layouts": [
              {
                "id": "qwerty",
                "name": "QWERTY",
                "description": "Standard QWERTY layout"
              },
              {
                "id": "dvorak",
                "name": "Dvorak",
                "description": "Dvorak layout"
              }
            ]
          },
          "ignoreFields": ["layouts"]
        }
      }
    },
    "/api/metrics/latency": {
      "scenarios": {
        "default": {
          "method": "GET",
          "status": 200,
          "body": {
            "min_us": 0,
            "avg_us": 0,
            "max_us": 0,
            "p95_us": 0,
            "p99_us": 0
          },
          "ignoreFields": ["min_us", "avg_us", "max_us", "p95_us", "p99_us"]
        }
      }
    },
    "/api/metrics/events": {
      "scenarios": {
        "empty": {
          "method": "GET",
          "status": 200,
          "body": {
            "events": []
          }
        },
        "with_events": {
          "method": "GET",
          "status": 200,
          "body": {
            "events": [
              {
                "timestamp": 1234567890,
                "key_code": 65,
                "event_type": "press",
                "device_id": "device-1"
              }
            ]
          },
          "ignoreFields": ["events"]
        }
      }
    },
    "/api/daemon/state": {
      "scenarios": {
        "default": {
          "method": "GET",
          "status": 200,
          "body": {
            "state": "running",
            "uptime_secs": 0,
            "total_events": 0
          },
          "ignoreFields": ["uptime_secs", "total_events"]
        }
      }
    }
  },
  "commonScenarios": {
    "unauthorized": {
      "status": 401,
      "body": {
        "error": "Unauthorized",
        "code": "UNAUTHORIZED"
      }
    },
    "server_error": {
      "status": 500,
      "body": {
        "error": "Internal server error",
        "code": "INTERNAL_ERROR"
      }
    },
    "not_found": {
      "status": 404,
      "body": {
        "error": "Not found",
        "code": "NOT_FOUND"
      }
    },
    "bad_request": {
      "status": 400,
      "body": {
        "error": "Bad request",
        "code": "BAD_REQUEST"
      }
    }
  },
  "metadata": {
    "lastUpdated": "2025-01-21T00:00:00Z",
    "author": "automated-e2e-testing",
    "notes": [
      "ignoreFields are used to skip fields that vary between runs (timestamps, IDs, etc.)",
      "Actual field values will be validated against expected structure, not exact values for ignored fields",
      "Version numbers and dynamic data should always be in ignoreFields"
    ]
  }
}
